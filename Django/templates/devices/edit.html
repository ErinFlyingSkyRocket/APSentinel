{% extends "base.html" %}
{% block content %}

<div class="device-header">
  <h2>Edit Device</h2>
  <a href="/ui/devices" class="btn">â† Back</a>
</div>

<div class="device-card">
  <form method="post">
    {% csrf_token %}

    <label for="name">Device Name</label>
    <input type="text" id="name" name="name" value="{{ device.name }}" required>

    <label for="location">Location</label>
    <input type="text" id="location" name="location" value="{{ device.location|default_if_none:'' }}">

    <label for="description">Description</label>
    <textarea id="description" name="description" rows="3">{{ device.description|default_if_none:'' }}</textarea>

    <label for="pubkey_pem">Public key (PEM)</label>
    <textarea id="pubkey_pem" name="pubkey_pem" rows="6" readonly
              style="width:100%;background:#151a24;color:#ccc;border:1px solid #333;
                     border-radius:6px;cursor:not-allowed;opacity:0.8;"
              title="Public key is read-only for security reasons">{{ device.pubkey_pem }}</textarea>
    <small style="opacity:.7;">Public key is read-only and cannot be edited.</small>

    <label style="margin-top:10px; display:flex; gap:8px; align-items:center;">
      <input type="checkbox" name="is_active" {% if device.is_active %}checked{% endif %}>
      Active (allow this device to ingest)
    </label>

    <div style="margin-top:12px;display:flex;gap:10px;">
      <button type="submit">ğŸ’¾ Save</button>
      <a href="/ui/devices" class="btn-link">Cancel</a>
    </div>
  </form>
</div>

{% endblock %}
